/* generator-yoctopus - Utility tool to build an yoctopus stack based on NodeJs / AngularJs - V1.3.0 */
"use strict";var path=require("path"),fs=require("fs"),glob=require("glob");exports.base=function(a,b){var c={},d=(a.params.all||!1,this.get("config").config.env||"development");this.get("protocol");glob("*.json",{cwd:path.normalize([process.cwd(),"app/config"].join("/")),realpath:!0},function(a,e){_.isNull(a)?async.eachSeries(e,function(a,d){try{_.merge(c,JSON.parse(fs.readFileSync(a)))}catch(e){this.get("logger").error(["[ Config:endpoint:base ] -","An error occured during font configuration loading :",e.message].join(" ")),b.sendStatus(500)}d()}.bind(this),function(){var a=path.normalize([process.cwd(),["app/config/env",[d,"json"].join(".")].join("/")].join("/"));try{_.merge(c,JSON.parse(fs.readFileSync(a)))}catch(e){this.get("logger").error(["[ Config:endpoint:base ] -","An error occured during font configuration loading :",e.message].join(" ")),b.sendStatus(500)}b.jsonp(c)}.bind(this)):(this.get("logger").error(["[ Config:endpoint:base ] -","Cannot get config file :",a].join(" ")),b.sendStatus(500))}.bind(this))},exports.languages=function(a,b){var c={};try{var d=path.normalize([process.cwd(),"app/config/languages",[a.params.isoCode,"json"].join(".")].join("/"));c=JSON.parse(fs.readFileSync(d))}catch(e){this.get("logger").error(["[ Config:endpoint:languages ] -","An error occured during language loading for [",a.params.isoCode,"] :",e.message].join(" "))}b.jsonp(c)};